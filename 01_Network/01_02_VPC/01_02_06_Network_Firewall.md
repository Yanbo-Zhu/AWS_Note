

# 1 AWS 网络防火墙

AWS 网络防火墙是 Amazon Web Services (AWS) 提供的托管防火墙服务。 它提供先进的安全功能，包括入侵检测和预防、深度数据包检查和流量过滤。

AWS 网络防火墙有助于保护网络流量。 它还可以保护虚拟私有云 (VPC) 和本地资源免遭未经授权的访问和潜在威胁。 该服务提供可自定义的规则：这些规则允许您根据特定条件定义允许或拒绝哪些流量。 此外，它支持状态检查，这意味着它可以跟踪活动连接并相应地做出安全决策。 
AWS 网络与其他 AWS 服务无缝集成，确保对 AWS 环境中托管的应用程序和资源提供全面保护。 
从本质上讲，AWS 网络在增强网络安全和保护关键资产方面发挥着至关重要的作用

# 2 setup 
https://zhuanlan.zhihu.com/p/664764593

1. 创建防火墙规则组: 
    1. 有规则状态组 还是 无规则状态组 
2. 创建 防火墙策略
    1. 添加 添加之前创建的有/无规则状态组
3. 创建 创建防火墙 
    1. 配置防火墙端点的子网, vpc 和 subnet, 确定 这个 防火墙 是用来保护那个 vpc 中的 那个子网的
    2. 关联现有防火墙策略


---


给 vpc创建三个路由表

![](image/Pasted%20image%2020240224162626.png)


1 防火墙子网 中的 firewall-table : 
设置 都流向 internet gateway 


2 示例子网中的 public-table: 
设置路由任何流量都流向防火墙终端节点
![](image/Pasted%20image%2020240224164030.png)


3 ingress-table
前面我们设置的都是实例流向外面的流量，现在外面要设置外面流入实例的流量也要经过防火墙
所以再创建一个名为ingress-table的路由表，这个路由表不需要绑定子网，它需要编辑边缘关联上互联网网关
![](image/Pasted%20image%2020240224164123.png)


![](image/Pasted%20image%2020240224164131.png)

选择互联网网关保存更改
![](image/Pasted%20image%2020240224164143.png)

然后配置其路由为vpc crdi块的流量发向防火墙终端节点，这就代表设置外面的流量要访问实例的话都要经过防火墙
![](image/Pasted%20image%2020240224164222.png)


# 3 AWS 网络防火墙与 AWS WAF（Web 应用程序防火墙）

AWS 网络防火墙与 AWS WAF（Web 应用程序防火墙）是两种不同的服务，它们为您的应用程序和资源提供不同类型的保护。

AWS WAF: 
它在网络级别运行，根据您定义的规则过滤流量。 它适合保护整个网络层。 它还提供入侵检测和预防、深度数据包检查和状态检查。 网络防火墙非常适合保护虚拟私有云 (VPC) 内的网络流量。 它有助于防止未经授权的访问和攻击到达您的应用程序。

该服务旨在保护 Web 应用程序免受常见的基于 Web 的攻击。 WAF 专注于应用程序层安全：它有助于识别和过滤针对您的 Web 应用程序的恶意流量。 它适用于防御跨站脚本 (XSS)、SQL 注入等威胁：WAF 允许您设置规则以根据特定条件阻止或允许流量。 总而言之，AWS Network Firewall 主要用于网络级保护，而 AWS WAF 专门用于保护 Web 应用程序免受应用程序级攻击。 根据您的需求，您可以选择最适合您的安全要求的服务。

---


AWS Network Firewall 适用于网络级保护，提供入侵检测、深度数据包检查和流量过滤。 它非常适合保护虚拟私有云 (VPC) 和本地资源免遭未经授权的访问和威胁。

AWS WAF（Web 应用程序防火墙）：如果您专注于保护 Web 应用程序，AWS WAF 专门针对基于 Web 的攻击提供应用程序级安全性。 它旨在防御跨站点脚本 (XSS) 和 SQL 注入等威胁，并为 Web 应用程序保护提供特定规则。

总之，AWS 网络防火墙和 AWS WAF 之间的选择取决于您的安全优先级。 如果您需要网络级保护，AWS 网络防火墙是更好的选择，而 AWS WAF 是保护 Web 应用程序的选择。


# 4 AWS 防火墙和网络 ACL 

AWS Firewall Manager 是一项集中管理服务，允许您跨多个 AWS 账户和资源配置和实施防火墙规则。 然而，它提供了一种全局方法。 您还可以为整个组织定义安全策略，确保一致的保护。 防火墙管理器支持 AWS WAF 和网络防火墙。 它还使您能够管理和实施应用程序级和网络级保护的规则。

网络 ACL（访问控制列表）是一种子网级过滤机制，在 Amazon Virtual Private Clouds (VPC) 内的网络级别运行。 网络 ACL 更加精细：它们允许您在子网级别定义入站和出站流量的规则。 但缺乏集中管理； 您需要为每个子网单独配置 ACL。 本质上，AWS Firewall Manager 旨在在更广泛的范围内集中和管理防火墙规则，而网络 ACL 则提供 VPC 内的子网级控制。 根据您的安全要求，您还可以选择适当的工具来增强 AWS 环境的保护。
